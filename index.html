<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Beer Run Blumenau 10K</title>
  <meta name="description" content="Corrida tem√°tica em Blumenau: 10 km, a cada 1 km parar em um pub para 1 pint. Mapa, regras e lista de paradas." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0b0d10;
      --card: #13161a;
      --muted: #a7b0ba;
      --text: #e5edf5;
      --accent: #ffd166; /* amarelo cerveja */
      --accent-2: #06d6a0; /* verde sucesso */
      --danger: #ef476f;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text); background: radial-gradient(1200px 700px at 20% -20%, #1a2026 5%, transparent 60%), var(--bg);
    }
    header {
      padding: 48px 24px 24px; max-width: 1100px; margin: 0 auto;
    }
    .badge { display:inline-flex; align-items:center; gap:.5rem; padding:.35rem .7rem; border-radius:999px; background:#1f252b; color:var(--muted); font-weight:600; font-size:.9rem }
    .title { font-size: clamp(2rem, 3vw + 1rem, 3.2rem); margin: 14px 0 8px; font-weight: 800; letter-spacing: -.02em }
    .subtitle { color: var(--muted); max-width: 70ch }
    .grid { display:grid; gap:20px; grid-template-columns: 1.2fr .8fr; }
    @media (max-width: 960px){ .grid{ grid-template-columns: 1fr; } }

    .card { background: linear-gradient(180deg,#161a20, #101317); border:1px solid #1e252c; border-radius: var(--radius); box-shadow: var(--shadow); overflow:clip }
    .card h3 { margin: 0 0 10px; font-size: 1.1rem }

    .map-wrap { width: 100%; height: 78vh; border-radius: 16px; overflow: hidden; }
    #map { width:100%; height:100%; }
    .num-marker { background: #ffd166; color:#1b1402; border:2px solid #cc9c00; font-weight:800; width:28px; height:28px; border-radius:50%; display:grid; place-items:center; box-shadow: var(--shadow)}
    iframe { width:100%; height:100%; border:0; display:block }

    .section { padding: 10px; }
    main { max-width: 1100px; margin: 0 auto; padding: 0 24px 40px; display: grid; gap: 20px }

    .list { list-style: none; margin: 0; padding: 0 }
    .stop { display:flex; align-items:center; justify-content:space-between; gap:12px; padding:14px 16px; border-radius: 14px; background:#12161b; border:1px solid #1c232a }
    .stop small { color: var(--muted) }
    .stop .left { display:flex; align-items:center; gap:12px }
    .km { width: 48px; height: 48px; display:grid; place-items:center; border-radius: 12px; background:#0f1317; border:1px solid #252c34; font-weight:800 }
    .name { font-weight:600 }
    .status { font-size: .85rem; padding:.2rem .6rem; border-radius:999px; border:1px solid #22303b; color:#a5c2ab; background:#0d1612 }
    .pending { color:#c5b087; background:#161307; border-color:#3a2e13 }

    .pill { display:inline-flex; align-items:center; gap:.4rem; padding:.25rem .5rem; border-radius:999px; border:1px solid #2a333d; color:var(--muted); font-size:.85rem }
    .pill b { color: var(--accent) }

    .rules { display:grid; gap:12px; grid-template-columns: repeat(2, minmax(0,1fr)); }
    @media (max-width: 720px){ .rules{ grid-template-columns: 1fr; } }
    .rule { padding:12px 14px; border-radius: 14px; background:#101419; border:1px dashed #29313a }

    .cta { display:flex; gap:12px; flex-wrap:wrap; margin-top: 12px }
    .btn { appearance:none; border:none; background:#1b2229; color:var(--text); padding:12px 16px; border-radius: 12px; font-weight:600; cursor:pointer; border:1px solid #25313b; box-shadow: var(--shadow); text-decoration:none }
    .btn.primary { background: linear-gradient(180deg,#2b343d,#1a2128); border-color:#303a44 }
    .btn.accent { background: linear-gradient(180deg,#ffd166,#ffb703); color:#1b1402; border-color:#f1a40a }

    footer { color: var(--muted); text-align:center; padding: 40px 24px }
  </style>
  <!-- Leaflet CSS/JS para mapa sem bloqueio de iframe -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
</head>
<body>
  <header>
    <span class="badge">üç∫üèÉ‚Äç‚ôÇÔ∏è Beer Run</span>
    <h1 class="title">Blumenau 10K ‚Äî 1 km ‚Ä¢ 1 pub ‚Ä¢ 1 pint</h1>
    <p class="subtitle">Proposta de corrida urbana divertida: completar <b>10 km</b> passando por pubs a cada <b>1 km</b>, tomando <b>1 pint</b> em cada parada. Vale dar pequenas voltas em quadra para fechar a dist√¢ncia. Toler√¢ncia de <b>¬±100 m</b> entre paradas.</p>
  </header>

  <main class="grid">
    <!-- Coluna do mapa -->
    <section class="card section">
      <h3>Mapa ‚Äî rota fiel ao seu print (ampliada)</h3>
      <div class="map-wrap">
        <div id="map"></div>
      </div>
      <div class="cta">
        <a class="btn primary" target="_blank" href="https://maps.app.goo.gl/M1WBUEuadBUzHJ5Y9">Abrir no Google Maps</a>
        <a class="btn" target="_blank" href="https://www.google.com/mymaps">Editar no My Maps</a>
      </div>
      <p class="pill" style="margin-top:10px">Status: <b>10/10</b> paradas planejadas (4 novas no final)</p>
    </section>

    <!-- Coluna lateral com regras e explica√ß√£o -->
    <aside class="card section">
      <h3>Como funciona</h3>
      <div class="rules">
        <div class="rule">‚Ä¢ Dist√¢ncia total: <b>10 km</b>.</div>
        <div class="rule">‚Ä¢ A cada <b>1 km</b>, parar em um <b>pub</b> e tomar <b>1 pint</b>.</div>
        <div class="rule">‚Ä¢ V√°lido dar <b>voltinhas em quadra</b> para fechar 1 km.</div>
        <div class="rule">‚Ä¢ Toler√¢ncia: <b>¬±100 m</b> do pr√≥ximo pub.</div>
      </div>
      <h3 style="margin-top:18px">Seguran√ßa & bom senso</h3>
      <p class="subtitle">Hidrate-se entre as paradas, evite vias perigosas, atravesse na faixa, e, se beber, <b>n√£o dirija</b>. Considere apoio de um amigo sober para log√≠stica.</p>
    </aside>
  </main>

  <main style="max-width:1100px" class="section">
    <section class="card section">
      <h3>Paradas previstas (edite √† vontade)</h3>
      <ul class="list" id="stops">
        <li class="stop" data-lat="-26.9134278" data-lng="-49.0854747"><div class="left"><div class="km">KM0</div><div><div class="name">Parque Ramiro Ruediger</div><small>largada</small></div></div><div><label class="pill"><input type="checkbox" class="chk-agua"> √°gua</label></div></li>
        <li class="stop" data-lat="-26.914365" data-lng="-49.0837427"><div class="left"><div class="km">KM1</div><div><div class="name">Eisenbahn Biergarten</div><small>1¬™ pint</small></div></div><div><label class="pill"><input type="checkbox" class="chk-pint"> pint</label> <label class="pill"><input type="checkbox" class="chk-agua"> √°gua</label></div></li>
        <li class="stop" data-lat="-26.9183266" data-lng="-49.0869563"><div class="left"><div class="km">KM2</div><div><div class="name">NOSSA Cozinha e Bar</div><small>2¬™ pint</small></div></div><div><label class="pill"><input type="checkbox" class="chk-pint"> pint</label> <label class="pill"><input type="checkbox" class="chk-agua"> √°gua</label></div></li>
        <li class="stop" data-lat="-26.9153469" data-lng="-49.0903409"><div class="left"><div class="km">KM3</div><div><div class="name">ESQUINA DECK BAR</div><small>3¬™ pint</small></div></div><div><label class="pill"><input type="checkbox" class="chk-pint"> pint</label> <label class="pill"><input type="checkbox" class="chk-agua"> √°gua</label></div></li>
        <li class="stop" data-lat="-26.9145927" data-lng="-49.0908103"><div class="left"><div class="km">KM4</div><div><div class="name">Alek Bar</div><small>4¬™ pint</small></div></div><div><label class="pill"><input type="checkbox" class="chk-pint"> pint</label> <label class="pill"><input type="checkbox" class="chk-agua"> √°gua</label></div></li>
        <li class="stop" data-lat="-26.9134193" data-lng="-49.0854484"><div class="left"><div class="km">KM5</div><div><div class="name">Noa Noa Blumenau</div><small>5¬™ pint</small></div></div><div><label class="pill"><input type="checkbox" class="chk-pint"> pint</label> <label class="pill"><input type="checkbox" class="chk-agua"> √°gua</label></div></li>
        <li class="stop" data-lat="-26.9115097" data-lng="-49.0862793"><div class="left"><div class="km">KM6</div><div><div class="name">Tamandar√© Food Park</div><small>6¬™ pint</small></div></div><div><label class="pill"><input type="checkbox" class="chk-pint"> pint</label> <label class="pill"><input type="checkbox" class="chk-agua"> √°gua</label></div></li>
        <li class="stop" data-lat="-26.914365" data-lng="-49.0837427"><div class="left"><div class="km">KM7</div><div><div class="name">Eisenbahn Biergarten (volta)</div><small>7¬™ pint</small></div></div><div><label class="pill"><input type="checkbox" class="chk-pint"> pint</label> <label class="pill"><input type="checkbox" class="chk-agua"> √°gua</label></div></li>
        <li class="stop" data-lat="-26.9134193" data-lng="-49.0854484"><div class="left"><div class="km">KM8</div><div><div class="name">Noa Noa (volta)</div><small>8¬™ pint</small></div></div><div><label class="pill"><input type="checkbox" class="chk-pint"> pint</label> <label class="pill"><input type="checkbox" class="chk-agua"> √°gua</label></div></li>
        <li class="stop" data-lat="-26.9153469" data-lng="-49.0903409"><div class="left"><div class="km">KM9</div><div><div class="name">ESQUINA DECK BAR (volta)</div><small>9¬™ pint</small></div></div><div><label class="pill"><input type="checkbox" class="chk-pint"> pint</label> <label class="pill"><input type="checkbox" class="chk-agua"> √°gua</label></div></li>
        <li class="stop" data-lat="-26.9145927" data-lng="-49.0908103"><div class="left"><div class="km">KM10</div><div><div class="name">Alek Bar (volta)</div><small>10¬™ pint</small></div></div><div><label class="pill"><input type="checkbox" class="chk-pint"> pint</label> <label class="pill"><input type="checkbox" class="chk-agua"> √°gua</label></div></li>
      </ul>
      <div class="cta">
        <button class="btn accent" id="export">Exportar lista (JSON)</button>
        <button class="btn" id="markAll">Marcar tudo como conclu√≠do</button>
        <a class="btn" id="toggleMapSize">Tela cheia do mapa</a>
      </div>
      <hr style="border:0;border-top:1px solid #1e2a34;margin:18px 0">
      <h3>Configura√ß√µes & tempos estimados</h3>
      <div class="rule" style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:12px">
        <label class="pill">Ritmo (min/km): <input id="paceMin" type="number" value="6" min="3" max="12" style="width:64px;background:transparent;border:none;color:var(--text)"> : <input id="paceSec" type="number" value="00" min="0" max="59" style="width:64px;background:transparent;border:none;color:var(--text)"></label>
        <label class="pill">Pausa por pub (min): <input id="stopMin" type="number" value="7" min="1" max="30" style="width:64px;background:transparent;border:none;color:var(--text)"></label>
        <button class="btn accent" id="recalc">Recalcular tempos</button>
      </div>
      <div style="overflow:auto">
        <table id="timesTable" style="width:100%;border-collapse:separate;border-spacing:0 8px">
          <thead><tr style="color:var(--muted);text-align:left"><th>Trecho</th><th>Dist√¢ncia (km)</th><th>Corrida</th><th>Pausa</th><th>Acumulado</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="cta">
        <button class="btn accent" id="export">Exportar lista (JSON)</button>
        <button class="btn" id="markAll">Marcar tudo como conclu√≠do</button>
      </div>
    </section>
  </main>

  <footer>
    <small>Beer Run Blumenau ‚Ä¢ Projeto pessoal. Este site √© um modelo est√°tico para organiza√ß√£o do trajeto.</small>
  </footer>

  <script>
    const q = (s, r=document) => r.querySelector(s);
    const qa = (s, r=document) => [...r.querySelectorAll(s)];

    // ========= Leaflet Map =========
    const map = L.map('map');
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Rota fiel ao seu print (aproxima√ß√£o com muitos v√©rtices)
    const route = [
      // Loop interno no Parque Ramiro (parecido com o print)
      [-26.91379, -49.08618],[-26.91405, -49.08579],[-26.91418, -49.08520],[-26.91407, -49.08463],[-26.91376, -49.08420],[-26.91331, -49.08400],[-26.91290, -49.08414],[-26.91257, -49.08450],[-26.91243, -49.08504],[-26.91253, -49.08561],[-26.91283, -49.08603],[-26.91324, -49.08624],[-26.91362, -49.08622],[-26.91379, -49.08618],
      // Sa√≠da leste at√© Eisenbahn Biergarten
      [-26.91370, -49.08590],[-26.91378, -49.08555],[-26.91395, -49.08521],[-26.91415, -49.08492],[-26.91433, -49.08463],[-26.91437, -49.08430],[-26.91437, -49.08395],[-26.914365, -49.0837427],
      // Grande la√ßo para sudeste/sul e retorno (conforme pontos do print)
      [-26.91510, -49.08330],[-26.91605, -49.08380],[-26.91710, -49.08460],[-26.91800, -49.08570],[-26.91820, -49.08660],
      // NOSSA Cozinha e Bar
      [-26.9183266, -49.0869563],
      // Oeste at√© Esquina Deck e Alek, com meia-volta
      [-26.91750, -49.08840],[-26.91640, -49.08940],[-26.91580, -49.09005],[-26.9153469, -49.0903409],
      [-26.9149000, -49.09060],[-26.9145927, -49.0908103],
      // Retorno ao entorno do Parque/Noa Noa com zigue-zagues (como no print)
      [-26.91430, -49.09010],[-26.91405, -49.08940],[-26.91380, -49.08860],[-26.91365, -49.08790],[-26.91352, -49.08720],[-26.91347, -49.08660],[-26.91342, -49.08600],[-26.9134193, -49.0854484],
      // La√ßos ao norte do parque (regi√£o "Resenhas bar" no print)
      [-26.91295, -49.08525],[-26.91220, -49.08510],[-26.91160, -49.08530],[-26.91110, -49.08580],[-26.91090, -49.08640],[-26.91110, -49.08710],[-26.91160, -49.08750],[-26.91230, -49.08745],[-26.91290, -49.08705],[-26.91320, -49.08650],
      // Sa√≠da para oeste at√© Tamandar√© Food Park (ponto final do seu link)
      [-26.91270, -49.08630],[-26.91220, -49.08631],[-26.91180, -49.08630],[-26.9115097, -49.0862793]
    ];

    const poly = L.polyline(route, { color: '#ffd166', weight: 5, opacity: 0.9 }).addTo(map);
    map.fitBounds(poly.getBounds(), { padding: [20,20] });

    // Paradas (10/10) com marcadores numerados
    const stops = [
      {n:0, name:'Parque Ramiro Ruediger (largada)', lat:-26.9134278, lng:-49.0854747},
      {n:1, name:'Eisenbahn Biergarten', lat:-26.914365, lng:-49.0837427},
      {n:2, name:'NOSSA Cozinha e Bar', lat:-26.9183266, lng:-49.0869563},
      {n:3, name:'ESQUINA DECK BAR', lat:-26.9153469, lng:-49.0903409},
      {n:4, name:'Alek Bar', lat:-26.9145927, lng:-49.0908103},
      {n:5, name:'Noa Noa Blumenau', lat:-26.9134193, lng:-49.0854484},
      {n:6, name:'Tamandar√© Food Park', lat:-26.9115097, lng:-49.0862793},
      // KM7‚ÄìKM10 (voltas planejadas ‚Äî alinhadas ao seu caminho)
      {n:7, name:'Eisenbahn (volta)', lat:-26.914365, lng:-49.0837427},
      {n:8, name:'Noa Noa (volta)', lat:-26.9134193, lng:-49.0854484},
      {n:9, name:'Esquina Deck (volta)', lat:-26.9153469, lng:-49.0903409},
      {n:10, name:'Alek Bar (volta)', lat:-26.9145927, lng:-49.0908103}
    ];

    const numIcon = (i)=> L.divIcon({ className:'num-marker', html: i, iconSize:[28,28], iconAnchor:[14,14] });
    stops.forEach(s => {
      L.marker([s.lat, s.lng], { icon: numIcon(s.n) }).addTo(map).bindPopup(`<b>KM${s.n}</b> ‚Äî ${s.name}`);
    });

    // ========= Controles existentes (lista, tempos, export) =========
    // Save editable names (se houver)
    qa('.name[contenteditable]').forEach((n,i)=>{
      const key = 'stopName'+i; const saved = localStorage.getItem(key); if(saved) n.textContent = saved;
      n.addEventListener('input', ()=> localStorage.setItem(key, n.textContent.trim()));
    });

    // Mark all confirmed (se existir o bot√£o)
    const markBtn = q('#markAll');
    if (markBtn){ markBtn.onclick = () => { qa('.status').forEach(s=>{ s.textContent='confirmado'; s.classList.remove('pending'); }); } }

    // Dist√¢ncia & pacing (usando paradas para estimar por trecho)
    const R = 6371e3; const rad = d => d * Math.PI / 180;
    function haversine(a,b){
      const dLat = rad(b.lat-a.lat), dLng = rad(b.lng-a.lng);
      const s = Math.sin(dLat/2)**2 + Math.cos(rad(a.lat))*Math.cos(rad(b.lat))*Math.sin(dLng/2)**2;
      return 2*R*Math.asin(Math.sqrt(s))/1000; // km
    }

    function getStops(){
      return stops.map(s=>({ km:`KM${s.n}`, nome:s.name, lat:s.lat, lng:s.lng }));
    }

    function secToHMM(sec){ const m=Math.round(sec/60); return m+" min"; }

    function recalc(){
      const paceMin = parseInt(document.getElementById('paceMin').value||6);
      const paceSec = parseInt(document.getElementById('paceSec').value||0);
      const stopMin = parseInt(document.getElementById('stopMin').value||7);
      const pace = (paceMin*60 + paceSec);
      const tbody = document.querySelector('#timesTable tbody');
      tbody.innerHTML = '';
      let cum=0; const s = getStops();
      for(let i=0;i<s.length-1;i++){
        const a=s[i], b=s[i+1];
        const dist = haversine(a,b);
        const run = Math.round(dist*pace); const pause = stopMin*60; cum += run+pause;
        const tr=document.createElement('tr');
        tr.innerHTML = `<td>${a.km} ‚Üí ${b.km} (${b.nome})</td><td>${dist.toFixed(2)}</td><td>${secToHMM(run)}</td><td>${stopMin} min</td><td>${secToHMM(cum)}</td>`;
        tbody.appendChild(tr);
      }
    }
    document.getElementById('recalc').onclick = recalc; recalc();

    // Export JSON dos stops
    const exportBtn = document.getElementById('export');
    if (exportBtn){ exportBtn.onclick = () => {
      const data = getStops();
      const blob = new Blob([JSON.stringify(data,null,2)], {type:'application/json'});
      const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download='beer-run-blumenau-stops.json'; a.click(); URL.revokeObjectURL(a.href);
    }; }
  </script>
</body>
</html>
